**vue为什么要用·异步更新？**

1. vue是组件级更新吗，就是说每一次的更新都是渲染整个组件，所以如果频繁渲染，会耗费性能
2. 如果vue采用同步更新，一旦修改了data中的数据，便会触发对应的watcher，然后调用对应watcher下面的update方法进行更新视图，多次触发，多次更新，耗费性能
3. 采用异步更新指的是在本轮数据更新之后，再去异步更新视图
4. 异步更新的原理就是，在同步修改数据的时候，把每一个属性对应的watcher存到一个数组队列中，进行去重，先不执行，等到同步数据修改完成之后，调用 nextTick 方法异步清空队列，让watcher执行



**nextTick有什么用？**

当数据更新时，在dom渲染后，执行回调函数，这样可以拿到最新的dom。

在 Promise.resolve().then() 中去执行回调函数，保证异步执行。

注意，vue3采用的 Promise，没有做兼容性处理，vue2采用了定时器和promise做兼容处理，保证异步。