**最早是http/0.9**

只支持get 请求，没有请求头。

传输之前先要建立客户端和服务端的TCP连接，然后客户端发起请求，服务器响应然后就关闭tcp连接。

无状态。

如果请求的页面不存在，也不返回任何错误的状态码。



**http/1.0**

1. 请求方式增加了 POST 和 HEAD，post 允许客户端向服务端提交数据。

2. 增加了请求头和响应头。

3. 增加了状态码。
4. 增加缓存机制（依赖于 Expires 作为强缓存判断的标准，last-modified/if-modified-since 作为协商缓存的标志）和身份认证。

缺点：

1. TCP 连接无法复用，每次请求都需要与服务器建立tcp连接，请求完成理科断开



**http/1.1**

持久连接，服务器发送数据之后，tcp不会立即断开。

增加了pipeline，同一个连接可以发送多个请求。

增加了host命令。

1. 新增 cache-control字段，优先级高于 expires
2. 新增 etag/if-none-match 判断
3. 默认开启长连接，可在一个 tcp 连接上传输多个 http 请求和响应
4. 增加错误状态码，比如 401，表示服务器上某个资源被永久移除
5. 增加了管道化技术，允许在第一个应答被完全发送之前就发送第二个请求

缺点：

1. 长连接使TCP连接可复用，但域名分片的情况下仍然需要建立多个 TCP 连接，给服务端造成压力。

2. 管道化技术（pipelining）只解决了部分队头阻塞问题。虽客户端一次性可发出多个请求，但管道要求返回是按序的，那么前一个请求耗时过长，同样阻塞了后续请求内容的返回。

3. HTTP/1.1 头部携带信息过多，在一定程度上增加了传输的成本。



**http/2.0**

所有数据以二进制传输，http/1.1以字符串的形式

同一个连接里面发送多个请求不在需要按照顺讯来

相比1.1，头信息压缩，减少带宽使用

1. 多路复用，采用帧标识数据，达到并行传输，不会出现数据错乱的情况
2. 头部压缩
3. 服务器推送，比如浏览器只请求了 index.html，但是服务器把 index.html，style.css、xxx.png 全部发送给浏览器，这样只需要一轮http通信，浏览器就得到了全部资源，提高了性能。



**http3**

目前仍然处于草案阶段，但是 Chrome 浏览器已经支持了。

弃用 TCP 协议，改为使用 基于 UDP 的QUIC 协议。

因为http2 仍然是基于 tcp 的，所以 tcp 的局限性无法避免。



**tcp 局限性**

1. 队头阻塞

HTTP/2.0多个请求在一个TCP连接中的，当TCP丢包，整个TCP都得等待重传，从而阻塞该TCP连接中的所有请求。TCP是字节流协议，TCP层必须保证收到字节数据是完整有序地，若序列号低的字段丢失，即使高的TCP字段被接收，应用层也无法从内核中读取这部分数据。

1. TCP与TLS握手延迟

发起HTTP请求，需经过TCP三次握手和TLS四次握手，共需3个往返时延（Round-Trip Time）延迟。TCP 还具有拥塞控制的特性，所以建立连接 TCP 会有个慢启动的过程，会对 TCP 连接产生减速效果。

1. 网络迁移需重新连接

TCP 连接由四元组（源IP、源端口、目标IP、目标端口）确定，若IP地址或端口变动，就会导致TCP与TLS重新握手，不利于移动设备切换网络



**HTTP/3.0 是使用基于UDP协议的QUIC协议，其具备如下四个优势：**

1. 连接迁移

QUIC协议通过`连接ID`来标记两个端点。因此，即使移动设备网络变化，导致IP变化，只要仍保有（连接ID、TLS密钥），就可以"无缝"地复用原连接，消除重连的成本。

1. 无队头阻塞

QUIC协议 与 HTTP/2 一样可并发传输多个 Stream。虽UDP不关心数据包丢失，但QUIC为了保证数据包可靠性，每个数据包都有一个序号唯一标识。当流中一个数据包丢失，即便流的其他数据包到达，数据也无法被HTTP/3.0读取，直到QUIC重传丢失的报文，数据才会交给 HTTP/3.0。QUIC连接上多个 Stream 之间没有依赖，都是独立的，某个流发生丢包，只会影响该流，其他流不受影响。

1. 自定义拥塞控制

在TCP拥塞算法的基础上做的改进，如可插拔，应用程序层面就能实现不同的拥塞控制算法，不需操作系统和内核支持；单个应用程序的不同连接也能支持配置不同的拥塞控制；无需停机和升级就可实现拥塞控制的变更。单调递增的Packet Number，使QUIC能区分原始包和重传包，避免重传模糊问题。有更多的ACK块，支持256个ACK块。可精确计算RTT时间。

1. 前向安全和前向纠错

发送一组数据之后，就对这组数据进行`异或运算`（效率高），并将结果也发送出去，那么接收方就有两份数据版本，可以对初始数据进行纠错和校验。以此保证了可靠性。



**tcp 和 udp 的区别：**

1. TCP面向连接；UDP无连接。

2. TCP基于字节流；UDP基于数据报文。

3. TCP提供可靠的服务，也就是说，通过TCP连接传送的数据，无差错，不丢失，不重复，且按序到达；UDP尽最大努力交付，即不保证可靠交付

4. TCP连接是点到点；UDP支持一对一、一对多、多对一和多对多的交互通信。

5. TCP首部开销20字节；UDP只有8个字节。

